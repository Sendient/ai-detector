[pytest]
minversion = 6.0

# Explicitly list plugins - may help with loading order/recognition
plugins =
    anyio
    pytest_asyncio
    pytest_dotenv
    pytest_mock
#     pytest_httpx # Currently disabled via addopts

# Use default pytest discovery patterns (recursive)
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# pythonpath = . # We removed this as it was for backend/pytest.ini

# pytest-dotenv:
# The root .env file is loaded first, then backend/.env.test, which can override variables for tests.
# Previous comment from your old file: # dotenv_files = .env # This was causing a warning, can be removed if not used or if .env is loaded by app
dotenv_files =
    .env
    backend/.env.test
# Example from your old file: dotenv_override_run_commands = true (if using run commands with dotenv)

# Configure asyncio mode (requires pytest-asyncio)
asyncio_mode = auto

# Explicitly tell pytest-httpx where to find the app
# httpx_async_app = conftest:app # Point to the 'app' fixture in conftest.py

# Add custom markers if needed
# markers =
#     slow: marks tests as slow to run
#     integration: marks integration tests

# Set log level for tests
log_cli = true
log_cli_level = WARNING
# log_file_level = DEBUG
# log_file = tests.log # Log file will be created in root

# Add command line options here
# Using -vs for verbose output and showing locals in tracebacks
# Using --log-cli-level=WARNING to reduce noise, logs still go to file if configured
addopts = -vs --log-cli-level=WARNING -p no:httpx

# Specify test paths
testpaths =
    tests

# Add other pytest configurations below if needed 