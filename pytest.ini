[pytest]
minversion = 6.0
# Explicitly list plugins - may help with loading order/recognition
# plugins =
#     pytest_httpx
#     pytest_asyncio
#     pytest_dotenv
# Use default pytest discovery patterns (recursive)
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
# pythonpath = . # We removed this as it was for backend/pytest.ini

# Configure asyncio mode (requires pytest-asyncio)
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Specify test paths
testpaths = tests

# Environment variables for tests (using pytest-dotenv)
dotenv_files =
    .env.test

# Set log level for tests
log_cli = true
log_cli_level = WARNING
# log_file_level = DEBUG
# log_file = tests.log # Log file will be created in root

# Add command line options here
# Using -vs for verbose output and showing locals in tracebacks
addopts = -vs --log-cli-level=WARNING -p no:httpx

# Silence warnings that cannot be fixed directly in test code
filterwarnings =
    ignore::DeprecationWarning:fastapi.applications
    ignore::DeprecationWarning:backend.app.main
    ignore:Please use `import python_multipart` instead:PendingDeprecationWarning:starlette.formparsers
    ignore:builtin type SwigPyPacked has no **module** attribute:DeprecationWarning
    ignore:builtin type SwigPyObject has no **module** attribute:DeprecationWarning
    ignore:builtin type swigvarlink has no **module** attribute:DeprecationWarning